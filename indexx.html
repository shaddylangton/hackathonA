<!DOCTYPE html>
<html>
<head>
    <title>Event Attendance</title>
</head>
<body>
    <h1>Event Attendance</h1>
    <button onclick="registerAttendee()">Register Attendee</button>
    <br><br>
    <label for="tokenCount">Token Count:</label>
    <input type="number" id="tokenCount" name="tokenCount">
    <button onclick="issueTokens()">Issue Tokens</button>
    <br><br>
    <label for="attendeeAddress">Attendee Address:</label>
    <input type="text" id="attendeeAddress" name="attendeeAddress">
    <br><br>
    <label for="tokenId">Token ID:</label>
    <input type="number" id="tokenId" name="tokenId">
    <button onclick="verifyAttendance()">Verify Attendance</button>
    <br><br>
    <p id="attendanceResult"></p>
    
    <script>
        const web3 = new Web3(Web3.givenProvider);
        const contractAddress = "ENTER_CONTRACT_ADDRESS_HERE";
        const contractAbi = [
            {
                "inputs": [],
                "name": "registerAttendee",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "tokenCount",
                        "type": "uint256"
                    }
                ],
                "name": "issueTokens",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "attendee",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "tokenId",
                        "type": "uint256"
                    }
                ],
                "name": "verifyAttendance",
                "outputs": [
                    {
                        "internalType": "bool",
                        "name": "",
                        "type": "bool"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "stateMutability": "payable",
                "type": "receive"
            }
        ];
        const contract = new web3.eth.Contract(contractAbi, contractAddress);
        
        async function registerAttendee() {
            const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
            const result = await contract.methods.registerAttendee().send({ from: accounts[0] });
            console.log(result);
        }
        
        async function issueTokens() {
            const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
            const tokenCount = document.getElementById("tokenCount").value;
            const result = await contract.methods.issueTokens(tokenCount).send({ from: accounts[0] });
            console.log(result);
        }
        
        async function verifyAttendance() {
            const attendeeAddress = document.getElementById("attendeeAddress").value;
            const tokenId = document.getElementById("tokenId").value;
            const result = await contract.methods.verifyAttendance(attendeeAddress, tokenId).call();
            document.getElementById("attendanceResult").innerHTML = result;
            console.log(result);
        }
    </script>
</body>
</html>
